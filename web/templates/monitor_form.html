{{define "title"}}{{.Title}}{{end}}
{{define "content"}}
<div x-data="{monitorType: '{{if .Data}}{{.Data.Type}}{{else}}http{{end}}'}">
    <h1 class="text-[15px] font-medium text-white mb-5">{{.Title}}</h1>

    <form method="POST" action="{{if .Data}}{{.BasePath}}/monitors/{{.Data.ID}}{{else}}{{.BasePath}}/monitors{{end}}" class="max-w-2xl space-y-4">
        <div class="border border-line rounded-lg p-5 space-y-4">
            <div>
                <label class="block text-[11px] text-muted uppercase tracking-widest mb-1.5">Name</label>
                <input type="text" name="name" value="{{if .Data}}{{.Data.Name}}{{end}}" required
                       class="w-full px-3 py-2 bg-surface border border-line rounded text-white text-[13px] placeholder-muted focus:outline-none focus:border-brand/30 transition-colors">
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-[11px] text-muted uppercase tracking-widest mb-1.5">Type</label>
                    <select name="type" x-model="monitorType"
                            class="w-full px-3 py-2 bg-surface border border-line rounded text-white text-[13px] focus:outline-none focus:border-brand/30 transition-colors">
                        <option value="http">HTTP</option>
                        <option value="tcp">TCP</option>
                        <option value="dns">DNS</option>
                        <option value="icmp">ICMP</option>
                        <option value="tls">TLS</option>
                        <option value="websocket">WebSocket</option>
                        <option value="command">Command</option>
                        <option value="heartbeat">Heartbeat</option>
                    </select>
                </div>
                <div x-show="monitorType !== 'heartbeat'" x-transition>
                    <label class="block text-[11px] text-muted uppercase tracking-widest mb-1.5">Target</label>
                    <input type="text" name="target" value="{{if .Data}}{{.Data.Target}}{{end}}" placeholder="https://example.com"
                           class="w-full px-3 py-2 bg-surface border border-line rounded text-white text-[13px] placeholder-muted focus:outline-none focus:border-brand/30 transition-colors">
                </div>
            </div>

            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div>
                    <label class="block text-[11px] text-muted uppercase tracking-widest mb-1.5">Interval (s)</label>
                    <input type="number" name="interval" value="{{if .Data}}{{.Data.Interval}}{{else}}60{{end}}" min="5" max="86400"
                           class="w-full px-3 py-2 bg-surface border border-line rounded text-white text-[13px] focus:outline-none focus:border-brand/30 transition-colors tabular-nums">
                </div>
                <div>
                    <label class="block text-[11px] text-muted uppercase tracking-widest mb-1.5">Timeout (s)</label>
                    <input type="number" name="timeout" value="{{if .Data}}{{.Data.Timeout}}{{else}}10{{end}}" min="1" max="300"
                           class="w-full px-3 py-2 bg-surface border border-line rounded text-white text-[13px] focus:outline-none focus:border-brand/30 transition-colors tabular-nums">
                </div>
                <div>
                    <label class="block text-[11px] text-muted uppercase tracking-widest mb-1.5">Fail Threshold</label>
                    <input type="number" name="failure_threshold" value="{{if .Data}}{{.Data.FailureThreshold}}{{else}}3{{end}}" min="1"
                           class="w-full px-3 py-2 bg-surface border border-line rounded text-white text-[13px] focus:outline-none focus:border-brand/30 transition-colors tabular-nums">
                </div>
                <div>
                    <label class="block text-[11px] text-muted uppercase tracking-widest mb-1.5">Pass Threshold</label>
                    <input type="number" name="success_threshold" value="{{if .Data}}{{.Data.SuccessThreshold}}{{else}}1{{end}}" min="1"
                           class="w-full px-3 py-2 bg-surface border border-line rounded text-white text-[13px] focus:outline-none focus:border-brand/30 transition-colors tabular-nums">
                </div>
            </div>

            <div>
                <label class="block text-[11px] text-muted uppercase tracking-widest mb-1.5">Tags</label>
                <input type="text" name="tags" value="{{if .Data}}{{range $i, $t := .Data.Tags}}{{if $i}}, {{end}}{{$t}}{{end}}{{end}}" placeholder="production, api"
                       class="w-full px-3 py-2 bg-surface border border-line rounded text-white text-[13px] placeholder-muted focus:outline-none focus:border-brand/30 transition-colors">
            </div>

            <div class="flex items-center gap-5">
                <label class="flex items-center gap-2 cursor-pointer">
                    <input type="checkbox" name="track_changes" {{if and .Data .Data.TrackChanges}}checked{{end}}
                           class="w-3.5 h-3.5 rounded-sm bg-surface border-line text-brand focus:ring-brand/30 focus:ring-offset-0">
                    <span class="text-[12px] text-muted-light">Track changes</span>
                </label>
                <label class="flex items-center gap-2 cursor-pointer">
                    <input type="checkbox" name="public" {{if and .Data .Data.Public}}checked{{end}}
                           class="w-3.5 h-3.5 rounded-sm bg-surface border-line text-brand focus:ring-brand/30 focus:ring-offset-0">
                    <span class="text-[12px] text-muted-light">Public badges</span>
                </label>
            </div>
        </div>

        <div class="border border-line rounded-lg p-5" x-show="monitorType !== 'heartbeat'" x-cloak x-transition>
            <label class="block text-[11px] text-muted uppercase tracking-widest mb-1.5">Settings (JSON)</label>
            <textarea name="settings" rows="3" placeholder="{}"
                      class="w-full px-3 py-2 bg-surface border border-line rounded text-white text-[13px] font-mono placeholder-muted focus:outline-none focus:border-brand/30 transition-colors resize-y">{{if .Data}}{{printf "%s" .Data.Settings}}{{end}}</textarea>
        </div>

        <div class="border border-line rounded-lg p-5">
            <label class="block text-[11px] text-muted uppercase tracking-widest mb-1.5">Assertions (JSON)</label>
            <textarea name="assertions" rows="3" placeholder="[]"
                      class="w-full px-3 py-2 bg-surface border border-line rounded text-white text-[13px] font-mono placeholder-muted focus:outline-none focus:border-brand/30 transition-colors resize-y">{{if .Data}}{{printf "%s" .Data.Assertions}}{{end}}</textarea>
        </div>

        <div class="flex items-center gap-3">
            <button type="submit" class="px-5 py-2 bg-brand hover:bg-brand/85 text-white text-[13px] font-medium rounded transition-colors">
                {{if .Data}}Update{{else}}Create{{end}}
            </button>
            <a href="{{.BasePath}}/monitors" class="text-[13px] text-muted hover:text-muted-light transition-colors">Cancel</a>
        </div>
    </form>
</div>
{{end}}
