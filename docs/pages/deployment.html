<h1>Deployment</h1>

<p>Asura listens on localhost only. Put a reverse proxy in front for TLS — don't expose it directly.</p>

<h2>1. Install Asura</h2>

<pre><code>git clone https://github.com/y0f/Asura.git
cd Asura
sudo bash install.sh</code></pre>

<p>Save the admin API key printed at the end. It cannot be recovered.</p>

<h2>2. Configure</h2>

<p>Edit <code>/etc/asura/config.yaml</code>:</p>

<pre><code>server:
  # Bind to localhost only — never bind to 0.0.0.0 on a public server
  listen: "127.0.0.1:8090"

  # Serve all routes under /asura (optional, remove for root)
  base_path: "/asura"

  # Your public URL — used in notification links
  external_url: "https://example.com/asura"

  # Trust nginx's forwarded headers for real client IP
  trusted_proxies:
    - "127.0.0.1"
    - "::1"

auth:
  session:
    cookie_secure: true    # Requires HTTPS (which nginx provides)</code></pre>

<h2>3. Nginx Reverse Proxy</h2>

<p>Grab the example config and swap in your domain:</p>

<pre><code>sudo cp deploy/nginx.conf /etc/nginx/sites-available/asura
sudo sed -i 's/example.com/yourdomain.com/g' /etc/nginx/sites-available/asura
sudo ln -s /etc/nginx/sites-available/asura /etc/nginx/sites-enabled/
sudo nginx -t && sudo systemctl reload nginx</code></pre>

<p>The example config (<a href="https://github.com/y0f/Asura/blob/main/deploy/nginx.conf" target="_blank">deploy/nginx.conf</a>) has both a sub-path setup (<code>example.com/asura/</code>) and a commented-out root setup (<code>monitor.example.com/</code>).</p>

<h2>4. Verify</h2>

<pre><code># Local health check (bypasses nginx)
curl http://127.0.0.1:8090/asura/api/v1/health

# Public health check (through nginx + TLS)
curl https://example.com/asura/api/v1/health

# Web UI
# Open https://example.com/asura/ in your browser</code></pre>

<h2>Caddy</h2>

<p>Caddy handles TLS automatically:</p>

<pre><code>example.com {
    redir /asura /asura/ permanent
    reverse_proxy /asura/* 127.0.0.1:8090
}</code></pre>

<h2>Serving from Root (no base_path)</h2>

<p>Want <code>https://monitor.example.com/</code> instead of a sub-path? Drop <code>base_path</code> from the config and uncomment the root variant in <a href="https://github.com/y0f/Asura/blob/main/deploy/nginx.conf" target="_blank">deploy/nginx.conf</a>.</p>
